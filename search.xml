<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Beginners Guide to DNS</title>
    <url>/2020/06/18/network/Understanding-DNS-Beginners-Guide-to-DNS/</url>
    <content><![CDATA[<p>dns (domain name system) is one of the most important technologies/services on the internet, as without it the internet would be very difficult to use.</p>
<p>dns provides a name to number (ip address) mapping or translation, allowing internet users to use, easy to remember names, and not numbers to access resources on a network and the internet.</p>
<a id="more"></a>

<p><strong>DNS Basics  – Understanding Why we Need it</strong><br>All devices (computers etc) that are connected to the Internet, your own network, or company network are identified by an IP address; which is a number.</p>
<p>To make it easy for people to remember names (host names) are used to identify individual computers on a network.</p>
<p>On early computer networks a simple text file called a hosts file was created that mapped host names to IP addresses.</p>
<p>This enabled people to refer to other computers by the name, and their computer translated that name to an IP address when it needed to communicate with it.</p>
<p>Here is the host file taken from my PC. It comes with all Windows machines</p>
<p><img src="http://www.steves-internet-guide.com/wp-content/uploads/2012/01/hosts-file1.jpg" alt=""></p>
<p>The location for the hosts file is normally C\windows\system32\drivers\etc</p>
<p>As network sizes increased the hosts file approach became impractical due to the fact that:</p>
<ul>
<li>It needed to be stored on each computer</li>
</ul>
<ul>
<li>The text file could take a along time to process due to the fact that it was unstructured.</li>
</ul>
<ul>
<li>Updates were difficult to manage as all of the computers would need to be given an updated file.<br>To overcome these (and other) limitations the DNS system was developed.</li>
</ul>
<p>The DNS system essentially provides for:</p>
<ul>
<li>A way to organize the names- Domain name structure</li>
</ul>
<ul>
<li>Protocols ,services and methods for storing,updating, and retrieving IP addresses for hosts computers.- DNS System<br>From the perspective of an end user you can consider the DNS system as a structured hosts file.<h2 id="Domain-Name-Structure"><a href="#Domain-Name-Structure" class="headerlink" title="Domain Name Structure"></a>Domain Name Structure</h2></li>
</ul>
<p>The hosts file is simply a list of names and IP addresses with no structure making it difficult to scale to a large number of machines.</p>
<p>The solution is to place the machines into administrative areas known as domains, and arrange the domains in a hierarchy.</p>
<p>This takes the form of a tree like structure that resembles the file system structure found on computers. See Understanding The Domain Name Structure</p>
<p>DNS System<br>The DNS system consists of many Domain Name servers that together provide the name to IP address mapping for registered devices (usually servers) on the Internet.</p>
<p>The main DNS severs (root servers) are owned and managed by a variety of different organizations, and are located mainly in the USA.</p>
<p>Here is a list <a href="http://www.iana.org/domains/root/servers" target="_blank" rel="noopener">http://www.iana.org/domains/root/servers</a>.</p>
<p>Other companies including ISPs have their own DNS servers which are linked to the root servers in a hierarchical fashion providing a distributed system.</p>
<p>The following video explain both the host file and its problems, and the basics of how DNS works.</p>
<p><a href="https://youtu.be/Vgc-Yqf_Tt4" target="_blank" rel="noopener">https://youtu.be/Vgc-Yqf_Tt4</a></p>
<p>Fortunately you don’t need to manage a DNS server or create DNS records to use the Internet.</p>
<p>However you need to have access to a DNS server.</p>
<p>To access a DNS server you will need the IP address of the DNS server.</p>
<p>This is usually supplied to you by your ISP (Internet Service Provider).</p>
<p>Most client computers/devices will be configured to obtain an IP and a DNS server address automatically. (see below)</p>
<p><img src="http://www.steves-internet-guide.com/wp-content/uploads/2012/04/windows-settings-ip-dns-automatically.jpg" alt=""></p>
<p>You can Check what IP address and what DNS address you have been assigned by typing ipconfig/all at the command line.</p>
<p><img src="http://www.steves-internet-guide.com/wp-content/uploads/2012/04/ipconfig-alljpg.jpg" alt=""></p>
<p>If DNS isn’t working properly then you will be unable to connect to other computers on the Internet using their name, but you can still connect using their IP address if you know it.</p>
<p>DNS Services- Open DNS and Google DNS<br>Most Home users will use the DNS severs provided by their ISP via their home router.</p>
<p>However you can use alternative DNS servers like OpenDNS and Google Public DNS.</p>
<p>This does mean that you will need to manually add these server addresses to your DNS settings.</p>
<p>Why Use Alternative DNS Services?<br>The standard DNS server doesn’t provide any form of protection from malicious sites.</p>
<p>Because DNS is the gateway to the Internet there are many companies that provide security related services based on the public DNS service.</p>
<p>They do this by filtering DNS requests. Most will detect phishing and spam sites, and many will provide protection from adult related sites.</p>
<p>Most security internet product suites will use some form of filtered DNS.</p>
<p>Open DNS was one of the first companies to do this and they offer family protection for free.</p>
<p>DNS server addresses are: 208.67.222.222 and 208.67.220.220</p>
<p>Google also provide a public DNS service. This doesn’t provide filtering, but may provide a faster DNS service than your ISP.</p>
<p>If your ISP blocks access to an address for some reason using an alternative DNS server like Google Public DNS may avoid the ISP blocks.</p>
<p>IP addresses are : 8.8.8.8 and 8.8.4.4</p>
<p>Basic DNS Concepts<br>There are many terms that you will see when reading about DNS.</p>
<p>Terms like zones, zone files, caching server etc.</p>
<p>This video is a good introduction to understanding those basic terms.</p>
<p><a href="https://youtu.be/T6ZD8st8S2w" target="_blank" rel="noopener">https://youtu.be/T6ZD8st8S2w</a></p>
<p>See DNS Zones and Zone Files Explained</p>
<p>DNS Name Resolution<br>To resolve a host name to an IP address using DNS you will need to have s DNS client on your machine, and the client must know the IP address of a DNS server.</p>
<p>The DNS client queries it’s DNS server which then follows through a process to get an answer- See DNS lookups explained.</p>
<p>Host Name Resolution<br>DNS and Host are two name resolution methods but they are not the only ones.</p>
<p>A Windows client will use DNS,Hosts and other methods to resolve a host name or computer name to an IP address. See Understanding Host name resolution methods.</p>
<p>Dynamic DNS<br>Internal IP addresses are normally are non static as they are usually assigned by a DHCP server.</p>
<p>In large corporate networks that use their own internal DNS and DHCP servers a need to keep the DNS servers up to date was required.</p>
<p>DDNS (Dynamic DNS updates) was introduced  to solve this problem- Wiki</p>
<p>The basic procedure is:</p>
<p>The Machine gets IP address from DHCP<br>The Machine or the DHCP server contacts the DNS server and updates the DNS record with the IP address and DNS name.<br>Home and small business networks don’t use their own DNS servers because they don’t have so many servers/machines,and they don’t really need DDNS either because  all their machines are in the same broadcast domain.</p>
<p>Because they are in the same broadcast domain windows networking will resolve the names and IP addresses, even if the IP addresses change.</p>
<p>However small business/home network may need DDNS if they want to provide access to internal resources from across the internet. See Dynamic DNS and Services Guide</p>
<p>DNS Problems<br>If you have problems connecting to resources on the Internet then DNS is one of the first things to check.</p>
<p>The main troubleshooting tool is nslookup and it is available on all of the main operating systems. See using nslookup .</p>
<p>Summary<br>The DNS system provides a domain name to IP address mapping for devices connected to the Internet, and it is crucial to the working of the Internet.</p>
<p>Usually you don’t need to worry about it as your are automatically assigned the address of the DNS server by your ISP and Home router.</p>
<p>If you are concerned about security then consider using a filtered DNS service like Open DNS.</p>
<p>Related Tutorials and Resources:</p>
<p>DNS Zone Fikes Explained<br>Understanding IP addresses<br>DNS wiki<br>DNS Essentials video</p>
]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>dns</tag>
      </tags>
  </entry>
  <entry>
    <title>my diary</title>
    <url>/2020/06/24/others/my-diary/</url>
    <content><![CDATA[<p>#diary of 6.24</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Carateres portugueses com teclado inglês </span><br><span class="line">à è ì ò ù     1. ctrl+&#96;             2. letter</span><br><span class="line">á é í ó ú     1. ctrl+’              2. letter</span><br><span class="line">â ê î ô û      1. crtl+shift+^    2. Letter</span><br><span class="line">Â                1. crtl+shift+^    2. Shift+letter</span><br><span class="line">ç                1. ctrl+,              2. C</span><br><span class="line">ã õ             1. crtl+shift+~    2. letter</span><br><span class="line">Ã                1. crtl+shift+~    2. Shift+letter</span><br><span class="line">ä ë ï ö ü     1. crtl+shift+:     2. letter</span><br></pre></td></tr></table></figure>

<p>this is portugues type board</p>
]]></content>
      <categories>
        <category>others</category>
      </categories>
  </entry>
  <entry>
    <title>s</title>
    <url>/2020/06/24/others/s/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>markdown basic syntax</title>
    <url>/2020/06/18/tools/markdown-basic-syntax/</url>
    <content><![CDATA[<p>This is abstract</p>
<a id="more"></a>

<p><strong>一. 标题</strong></p>
<p>在你的标题前加上#，几级标题就用几个#，例如：</p>
<p><strong>sara</strong></p>
<h2 id="er二级标题"><a href="#er二级标题" class="headerlink" title="er二级标题"></a>er二级标题</h2><p><em>斜体</em></p>
<p><strong>加粗</strong></p>
<p><del>删除线</del></p>
<blockquote>
<p>这是引用</p>
<blockquote>
<p>这是嵌套引用</p>
<blockquote>
<p>这也是嵌套引用</p>
<blockquote>
<p>这又又又是嵌套引用</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>下面是分割线</p>
<hr>
<h2 id="下面也是分割线"><a href="#下面也是分割线" class="headerlink" title="下面也是分割线"></a>下面也是分割线</h2><p><img src="https://cn.toursforfun.com/images/image/20190904/20190904164008_98424.jpg" alt="it is portugal" title="portugal"></p>
<p><a href="www.baidu.com" title="传送门">上一篇博客</a></p>
<ul>
<li>这是无序列表</li>
<li>这也是无序列表</li>
<li>这也是无序列表</li>
</ul>
<ul>
<li>这也是无序列表</li>
<li>这也是无序列表</li>
<li>这也是无序列表</li>
</ul>
<ul>
<li>无序列表</li>
<li>无序列表</li>
<li>无序列表</li>
</ul>
<ol>
<li>有序列表<ul>
<li>无序列表</li>
<li>无序列表</li>
<li>午休恶变</li>
</ul>
</li>
<li>有序列表</li>
<li>有序列表</li>
</ol>
<ul>
<li>无序列表<ol>
<li>有序列表</li>
<li>有序列表</li>
<li>有序列表</li>
</ol>
<ul>
<li>无序列表</li>
<li>无序列表</li>
<li>无需列表</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">魏</th>
<th align="center">蜀</th>
<th align="center">吴</th>
</tr>
</thead>
<tbody><tr>
<td align="center">曹操</td>
<td align="center">刘备</td>
<td align="center">孙权</td>
</tr>
<tr>
<td align="center">徐晃</td>
<td align="center">关羽</td>
<td align="center">周瑜</td>
</tr>
<tr>
<td align="center">许攸</td>
<td align="center">张飞</td>
<td align="center">孙策</td>
</tr>
</tbody></table>
<p><code>here is the code</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">here is the code</span><br><span class="line">here is the code</span><br><span class="line">here is the code</span><br><span class="line"></span><br><span class="line">Public Class buz()&#123;</span><br><span class="line">    void fuck(</span><br><span class="line">        system.out.printline(&quot;fuck you!&quot;)</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">st&#x3D;&gt;start: 开始</span><br><span class="line">op&#x3D;&gt;operation: My Operation</span><br><span class="line">cond&#x3D;&gt;condition: Yes or No?</span><br><span class="line">e&#x3D;&gt;end</span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">st&#x3D;&gt;start: Start:&gt;http:&#x2F;&#x2F;www.google.com[blank]</span><br><span class="line">e&#x3D;&gt;end:&gt;http:&#x2F;&#x2F;www.google.com</span><br><span class="line">op1&#x3D;&gt;operation: My Operation</span><br><span class="line">sub1&#x3D;&gt;subroutine: My Subroutine</span><br><span class="line">cond&#x3D;&gt;condition: Yes</span><br><span class="line">or No?:&gt;http:&#x2F;&#x2F;www.google.com</span><br><span class="line">io&#x3D;&gt;inputoutput: catch something...</span><br><span class="line">para&#x3D;&gt;parallel: parallel tasks</span><br><span class="line"></span><br><span class="line">st-&gt;op1-&gt;cond</span><br><span class="line">cond(yes)-&gt;io-&gt;e</span><br><span class="line">cond(no)-&gt;para</span><br><span class="line">para(path1, bottom)-&gt;sub1(right)-&gt;op1</span><br><span class="line">para(path2, top)-&gt;op1</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">graph LR;</span><br><span class="line">a--&gt;|b|c;</span><br><span class="line">c--&gt;|d|e;</span><br><span class="line">e--&gt;|f|c;</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">graph LR;</span><br><span class="line">　　client---core;</span><br><span class="line">　　client---common;</span><br><span class="line">　　core---common;</span><br><span class="line">　　common---portal;</span><br><span class="line">　　common---Biz;</span><br><span class="line">　　Biz---ConfigService;</span><br><span class="line">　　Biz---AdminService;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">graph LR;</span><br><span class="line">a---b;</span><br><span class="line">a---c;</span><br><span class="line">b---c;</span><br><span class="line">c---d;</span><br><span class="line">d---e;</span><br><span class="line">e---f;</span><br><span class="line">c---f;</span><br><span class="line">a---f;</span><br><span class="line">f---g;</span><br><span class="line">g---a;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>blog</tag>
        <tag>markdown</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2020/06/18/development/web%20dev/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<a id="more"></a>

<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
      <categories>
        <category>development</category>
        <category>web dev</category>
      </categories>
  </entry>
  <entry>
    <title>AWS上RHEL-ec2 vsftpd搭建常见问题总结</title>
    <url>/2020/07/01/development/linux/AWS%E4%B8%8ARHEL-ec2-vsftpd%E6%90%AD%E5%BB%BA%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<a id="more"></a>
<h3 id="浏览器端测试"><a href="#浏览器端测试" class="headerlink" title="浏览器端测试"></a>浏览器端测试</h3><p>打开浏览器，地址栏输入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">回车，弹出输入用户名密码的窗口，确认，如果成功则会显示&#x2F;var&#x2F;www&#x2F;下的文件。</span><br><span class="line">两种常见的问题:</span><br><span class="line">#### 问题1</span><br><span class="line">浏览器的页面只显示：index of ,而不显示任何ftp目录中文件或文件夹，执行：</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;sudo getsebool -a | grep ftp</span><br></pre></td></tr></table></figure>

<p>如果你的结果是这样的：</p>
<figure class="highlight plain"><figcaption><span>--> off</span></figcaption><table><tr><td class="code"><pre><span class="line">ftpd_connect_all_unreserved --&gt; on</span><br><span class="line">ftpd_connect_db --&gt; off</span><br><span class="line">ftpd_full_access --&gt; off</span><br><span class="line">ftpd_use_cifs --&gt; off</span><br><span class="line">ftpd_use_fusefs --&gt; off</span><br><span class="line">ftpd_use_nfs --&gt; off</span><br><span class="line">ftpd_use_passive_mode --&gt; off</span><br><span class="line">httpd_can_connect_ftp --&gt; off</span><br><span class="line">httpd_enable_ftp_server --&gt; off</span><br><span class="line">tftp_anon_write --&gt; off</span><br><span class="line">tftp_home_dir --&gt; off</span><br></pre></td></tr></table></figure>
<p>执行；</p>
<figure class="highlight plain"><figcaption><span>setsebool -P ftpd_full_access 1``` 将```ftpd_full_access```由off改成on.</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">再次执行</span><br><span class="line">&#96;&#96;&#96;sudo getsebool -a | grep ftp</span><br></pre></td></tr></table></figure>

<p>显示<code>ftpd_full_access --&gt; off</code></p>
<p>重启vsftpd服务，问题应该解决了。</p>
<h4 id="问题2"><a href="#问题2" class="headerlink" title="问题2"></a>问题2</h4><p>浏览器发出ftp请求后，不停的弹出ftp登录页面，即使用户名密码都是对的。<br>请执行：</p>
<p><code>sudo usermod -d /var/www/ ftpuser</code></p>
<p>来指定你ftpuser的主目录。</p>
]]></content>
      <categories>
        <category>development</category>
        <category>linux</category>
      </categories>
  </entry>
  <entry>
    <title>Summary of FTP building up in RHEL</title>
    <url>/2020/06/29/development/linux/Summary-of-FTP-building-up-in-RHEL/</url>
    <content><![CDATA[<a id="more"></a>

<h3 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h3><p> 该博客为记录自己在AWS的RHEL服务器上搭建FTP并成功实现从本地上传文件到服务起的过程，期间遇到了不少问题，经过一系列挣扎后，之一解决，特此记录，希望遇到相似问题的小伙伴们少走弯路。</p>
<h3 id="背景（环境）："><a href="#背景（环境）：" class="headerlink" title="背景（环境）："></a>背景（环境）：</h3><ul>
<li>server - RHEL on AWS ，</li>
<li>client - win10 OS</li>
<li>FTP server - vsftpd</li>
<li>FTP clent - FileZilla</li>
</ul>
<p>在RHEL8系统中，yum源已包含vsftpd，因此可直接安装vsftpd包并启动对应的服务，一台FTP服务器就搭建好了,默认的vsftpd服务具备一台标准FTP服务器的能力.</p>
<h3 id="搭建FTP服务器"><a href="#搭建FTP服务器" class="headerlink" title="搭建FTP服务器"></a>搭建FTP服务器</h3><ol>
<li><p>安装vsftpd<br><code>yum -y install vsftpd</code><br>查看<br><code>rpm -q vsftpd</code><br>vsftpd-3.0.3-31.el8.x86_64</p>
</li>
<li><p>启用vsftpd服务，并设为开机自动运行<br><code>service vsftpd restart</code><br><code>sudo chkconfig --level 345 vsftpd on</code></p>
</li>
<li><p>vsftpd服务默认通过TCP 21端口监听客户端请求：<br><code>netstat -anptu | grep vsftpd</code><br><code>tcp6       0      0 :::21                   :::*                    LISTEN      21387/vsftpd</code></p>
</li>
<li><p>新建用户<br><code>useradd ftpuser</code><br>create your folders for ftp, for example /var/www:<br><code>sudo mkdir /var/www</code></p>
</li>
<li><p>修改目录/var/www权限为只读<br><code>sudo chmod 555 /var/www</code></p>
</li>
<li><p>修改目录/var/www/html权限为可写<br><code>sudo chmod -R 755 /var/www/html</code></p>
</li>
<li><p>修改目录的所有者及组<br><code>sudo chown -R ftpuser-ftp /var/www</code></p>
</li>
<li><p>修改用户的主目录<br><code>sudo usermod -d /var/www/ ftpuser</code></p>
</li>
<li><p>在你的AWS实例管理界面的secruity group 里添加inbound rules:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Protocol</th>
<th>Port Range</th>
<th>Source</th>
</tr>
</thead>
<tbody><tr>
<td>SSH</td>
<td>TCP</td>
<td>22</td>
<td>ip/32</td>
</tr>
<tr>
<td>HTTP</td>
<td>TCP</td>
<td>80</td>
<td>0.0.0.0/0</td>
</tr>
<tr>
<td>Custom TCP Rule</td>
<td>TCP</td>
<td>20 - 21</td>
<td>0.0.0.0/0</td>
</tr>
<tr>
<td>Custom TCP Rule</td>
<td>TCP</td>
<td>1024 - 1048</td>
<td>0.0.0.0/0</td>
</tr>
</tbody></table>
</li>
<li><p>修改vsftpd配置文件vsftpd.conf<br><code>sudo vi /etc/vsftpd/vsftpd.conf</code></p>
</li>
<li><p>Disable掉 anonymous FTP(安全考虑):<br>将<code>anonymous_enable=YES</code>改为<code>no</code>,并在文件结尾添加如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pasv_min_port&#x3D;1024</span><br><span class="line">pasv_max_port&#x3D;1048</span><br><span class="line">pasv_address&#x3D;&lt;你的服务器IP地址&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>在/etc/vsftpd/里：<br><code>sudo vim user_list</code><br>文件内容大概是这样：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># vsftpd userlist  </span><br><span class="line"># If userlist_deny&#x3D;NO, only allow users in this file  </span><br><span class="line"># If userlist_deny&#x3D;YES (default), never allow users in this  file, and</span><br><span class="line"># do not even prompt for a password.</span><br><span class="line"># Note that the default vsftpd pam config also checks &#x2F;etc&#x2F;vsftpd&#x2F;ftpusers</span><br><span class="line"># for users that are denied.</span><br><span class="line">root</span><br><span class="line">bin</span><br><span class="line">daemon</span><br><span class="line">adm</span><br><span class="line">lp</span><br><span class="line">sync</span><br><span class="line">shutdown</span><br><span class="line">halt</span><br><span class="line">mail</span><br><span class="line">news</span><br><span class="line">uucp</span><br><span class="line">operator</span><br><span class="line">games</span><br><span class="line">nobody</span><br></pre></td></tr></table></figure>
<p>意思是，不允许列表中的这些用户访问FTP，你可以通过修改这个列表改变安全策略，目前我们的用户ftpuser不在这个列表中。</p>
</li>
<li><p>将用户限制在其主目录中(安全考虑): 在配置文件<code>vsftpd.conf</code>中，取消<code>chroot_local_user=YES</code>的注释。</p>
</li>
<li><p>重启vsftpd服务:<br><code>sudo service vsftpd restart</code><br>查看状态<br><code>sudo service vsftpd status</code></p>
</li>
<li><p>将FTP的默认上传目录改为建好的ftp目录/var/www:<br>添加<code>local_root=/var/www/</code>到配置文件<code>vsftpd.conf</code>最后.</p>
</li>
<li><p>重启ftp服务：<br><code>sudo service vsftpd restart</code><br><code>sudo service vsftpd status</code></p>
<p>至此，服务器端的vsftp服务配置完成。</p>
</li>
</ol>
<h3 id="FTP客户端"><a href="#FTP客户端" class="headerlink" title="FTP客户端"></a>FTP客户端</h3><p>可以使用专门的FTP客户端/管理工具（FTP命令程序、Filezilla图形工具），也可以使用Web浏览器、下载工具（比如wget）等支持FTP协议的通用软件。<br>使用web浏览器访问FTP服务器的其方法是：</p>
<ul>
<li><code>ftp://服务器地址/path/to/file</code></li>
<li>对于要求登录验证才能访问的FTP资源，可以在地址中指定用户名、密码信息：<br><code>ftp://user:pass@服务器地址/path/to/file</code></li>
</ul>
<p>FTP客户端这里以FileZilla为例:</p>
<p>下载：<a href="https://filezilla-project.org/" target="_blank" rel="noopener">FileZilla下载</a></p>
<p>安装后，依次输入host, username, password,点击quickconnect即可。注意这里的username只能是你的ftp用户。<br>连接成功后你可以测试一下，按照我们的配置，用户ftpuser对/var/www目录没有写权限，所以你不能上传文件至var/www目录，但是可以上传至/var/www/html目录。</p>
<h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>至此，我们完成了在AWS的RHEL8-ec2服务器上的FTP服务，ftp客户端FileZilla的搭建的过程。如果你是按照我的步骤来进行，应该不会出问题，但由于vsftpd的版本不一样，默认的参数配置也会有区别，如果你确实遇到问题，请参见下一篇文章：<a href="http://localhost:4000/2020/07/01/development/linux/AWS%E4%B8%8ARHEL-ec2-vsftpd%E6%90%AD%E5%BB%BA%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/" target="_blank" rel="noopener">AWS上RHEL-ec2 vsftpd搭建常见问题总结</a></p>
]]></content>
      <categories>
        <category>development</category>
        <category>linux</category>
      </categories>
      <tags>
        <tag>RHEL</tag>
        <tag>linux</tag>
        <tag>FTP</tag>
        <tag>vsftpd</tag>
        <tag>AWS</tag>
        <tag>FileZilla</tag>
      </tags>
  </entry>
</search>
